<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1a1a2e">
    <title>Breathe - Breathing Techniques</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/backgrounds.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <!-- Global Controls -->
    <button class="sound-toggle" id="soundToggle" title="Toggle Sound">üîä</button>
    <button class="back-btn" id="backBtn" title="Back">‚Üê</button>
    
    <!-- Language Selector -->
    <div class="lang-selector">
        <select id="langSelector" title="Select Language">
            <option value="en">üá∫üá∏ EN</option>
            <option value="es">üá™üá∏ ES</option>
        </select>
    </div>
    
    <!-- Background Animation Container -->
    <div id="background-animation"></div>

    <!-- Main App Container -->
    <div class="container">
        
        <!-- ==================== Main Menu Screen ==================== -->
        <div id="menu-screen" class="screen active">
            <h1>üå¨Ô∏è <span data-i18n="app.title">Breathe</span></h1>
            <p class="subtitle" data-i18n="app.subtitle">Swipe or use arrows to choose a technique</p>
            
            <div class="carousel-container">
                <button class="carousel-arrow carousel-prev" id="carouselPrev">‚Äπ</button>
                <div class="carousel-viewport">
                    <div class="carousel-track" id="carouselTrack">
                        <!-- Technique cards generated by JavaScript -->
                    </div>
                </div>
                <button class="carousel-arrow carousel-next" id="carouselNext">‚Ä∫</button>
            </div>
            
            <div class="carousel-dots" id="carouselDots">
                <!-- Dots generated by JavaScript -->
            </div>
            
            <button class="btn btn-start" id="startFromCarousel" data-i18n="app.beginPractice">Begin Practice</button>

            <div class="settings">
                <div class="setting-group">
                    <label for="bgAnimation" data-i18n="app.backgroundAnimation">Background Animation</label>
                    <select id="bgAnimation" data-i18n-options="backgrounds">
                        <option value="particles">Floating Particles</option>
                        <option value="waves">Ocean Waves</option>
                        <option value="gradient">Shifting Gradient</option>
                        <option value="combined">Combined (All Effects)</option>
                        <option value="none">None (Minimal)</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- ==================== Technique Detail Screen ==================== -->
        <div id="detail-screen" class="screen">
            <div class="detail-container">
                <div class="detail-header">
                    <div class="detail-icon" id="detailIcon">üî≤</div>
                    <h2 id="detailName">Technique Name</h2>
                    <p class="subtitle" id="detailTagline">Tagline here</p>
                </div>

                <div class="detail-section">
                    <h3>üî¨ <span data-i18n="detail.science">Scientific Support</span></h3>
                    <p id="detailScience">Scientific information here.</p>
                </div>

                <div class="detail-section">
                    <h3>‚öôÔ∏è <span data-i18n="detail.mechanism">How It Works</span></h3>
                    <p id="detailMechanism">Mechanism explanation here.</p>
                </div>

                <div class="detail-section">
                    <h3>üìã <span data-i18n="detail.steps">Steps</span></h3>
                    <ol class="steps-list" id="detailSteps">
                        <!-- Steps generated by JavaScript -->
                    </ol>
                </div>

                <div class="settings">
                    <div class="setting-group">
                        <label for="repetitions" data-i18n="detail.cycles">Number of Cycles</label>
                        <input type="range" id="repetitions" min="1" max="10" value="4">
                        <div class="range-value"><span id="repValue">4</span> <span data-i18n="detail.cyclesUnit">cycles</span></div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-start" id="startPracticeBtn" data-i18n="app.beginPractice">Begin Practice</button>
                </div>
            </div>
        </div>

        <!-- ==================== Breathing Exercise Screen ==================== -->
        <div id="breathing-screen" class="screen">
            <div class="breathing-container">
                <h2 id="breathingTitle" style="color: #a8d8ea; margin-bottom: 10px; font-size: 1.2rem;">Box Breathing</h2>
                
                <!-- Phase Indicator (for 4-7-8) -->
                <div class="phase-indicator" id="phaseIndicator" style="display: none;">
                    <div class="phase-dot inhale" data-phase="inhale"></div>
                    <div class="phase-dot hold" data-phase="hold"></div>
                    <div class="phase-dot exhale" data-phase="exhale"></div>
                </div>
                
                <div class="instruction-text" id="instruction" data-i18n="breathing.getReady">Get Ready...</div>
                
                <!-- Box Breathing Animation -->
                <div class="animation-container" id="boxAnimation">
                    <div class="square-container">
                        <div class="square-base"></div>
                        <div class="square-side side-top" id="sideTop"></div>
                        <div class="square-side side-right" id="sideRight"></div>
                        <div class="square-side side-bottom" id="sideBottom"></div>
                        <div class="square-side side-left" id="sideLeft"></div>
                    </div>
                    <div class="timer-display" id="timerBox">4</div>
                </div>

                <!-- 4-7-8 Arc Animation -->
                <div class="animation-container" id="arcAnimation" style="display: none;">
                    <div class="arc-container">
                        <svg class="arc-svg" viewBox="0 0 100 100">
                            <circle class="arc-bg" cx="50" cy="50" r="42"/>
                            <circle class="arc-segment arc-inhale" id="arcInhale" cx="50" cy="50" r="42" 
                                stroke-dasharray="0 264" stroke-dashoffset="0"/>
                            <circle class="arc-segment arc-hold" id="arcHold" cx="50" cy="50" r="42" 
                                stroke-dasharray="0 264" stroke-dashoffset="0"/>
                            <circle class="arc-segment arc-exhale" id="arcExhale" cx="50" cy="50" r="42" 
                                stroke-dasharray="0 264" stroke-dashoffset="0"/>
                        </svg>
                    </div>
                    <div class="timer-display purple" id="timerArc">4</div>
                </div>

                <!-- Diaphragmatic/Belly Breathing Animation -->
                <div class="animation-container" id="bellyAnimation" style="display: none;">
                    <div class="belly-container">
                        <div class="belly-circle" id="bellyCircle"></div>
                        <div class="belly-inner-circle" id="bellyInnerCircle"></div>
                        <div class="belly-label" data-i18n="animations.belly">Belly</div>
                    </div>
                    <div class="timer-display teal" id="timerBelly">5</div>
                </div>

                <!-- Resonance/Wave Breathing Animation -->
                <div class="animation-container" id="waveAnimation" style="display: none;">
                    <div class="wave-container">
                        <div class="wave-track">
                            <div class="wave-line" id="wave1"></div>
                            <div class="wave-line" id="wave2"></div>
                            <div class="wave-line" id="wave3"></div>
                        </div>
                        <div class="wave-ball" id="waveBall"></div>
                        <div class="wave-label" data-i18n="animations.flow">Flow</div>
                    </div>
                    <div class="timer-display indigo" id="timerWave">6</div>
                </div>

                <!-- Wim Hof/Power Breathing Animation -->
                <div class="animation-container" id="powerAnimation" style="display: none;">
                    <div class="power-container">
                        <div class="power-ring" id="powerRing1"></div>
                        <div class="power-ring" id="powerRing2"></div>
                        <div class="power-ring" id="powerRing3"></div>
                        <div class="power-core" id="powerCore"></div>
                        <div class="breath-counter" id="breathCounter">1</div>
                        <div class="power-label" data-i18n="animations.power">Power</div>
                    </div>
                    <div class="timer-display orange" id="timerPower">45</div>
                </div>

                <!-- Buteyko/Gauge Animation -->
                <div class="animation-container" id="gaugeAnimation" style="display: none;">
                    <div class="gauge-container">
                        <svg class="gauge-svg" viewBox="0 0 100 100">
                            <circle class="gauge-bg" cx="50" cy="50" r="45"/>
                            <circle class="gauge-fill" id="gaugeFill" cx="50" cy="50" r="45"/>
                        </svg>
                        <div class="gauge-center" id="gaugeCenter">
                            <span class="cp-label" id="cpLabel">CP</span>
                        </div>
                        <div class="gauge-label" data-i18n="animations.control">Control</div>
                    </div>
                    <div class="timer-display teal-dark" id="timerGauge">20</div>
                </div>
                
                <div class="progress-info">
                    <span data-i18n="breathing.cycle">Cycle</span> <span id="currentCycle">1</span> <span data-i18n="breathing.of">of</span> <span id="totalCycles">4</span>
                </div>
                
                <div class="controls">
                    <button class="btn btn-pause" id="pauseBtn" data-i18n="breathing.pause">Pause</button>
                    <button class="btn btn-stop" id="stopBtn" data-i18n="breathing.stop">Stop</button>
                </div>
            </div>
        </div>

        <!-- ==================== Congratulations Screen ==================== -->
        <div id="congrats-screen" class="screen">
            <div class="congrats-container">
                <div class="congrats-icon">‚ú®</div>
                <h2 class="congrats-title" data-i18n="congrats.title">Well Done!</h2>
                <p class="congrats-message" data-i18n-html="congrats.message">
                    You've completed your breathing exercise.<br>
                    Take a moment to notice how you feel.
                </p>
                
                <div class="stats">
                    <div class="stat-item"><span data-i18n="congrats.technique">Technique</span>: <span class="stat-value" id="statTechnique">Box Breathing</span></div>
                    <div class="stat-item"><span data-i18n="congrats.completedCycles">Cycles Completed</span>: <span class="stat-value" id="statCycles">4</span></div>
                    <div class="stat-item"><span data-i18n="congrats.totalTime">Total Time</span>: <span class="stat-value" id="statTime">1:04</span></div>
                </div>
                
                <button class="btn btn-start" id="practiceAgainBtn" data-i18n="congrats.practiceAgain">Practice Again</button>
                <button class="btn btn-secondary" id="mainMenuBtn" data-i18n="congrats.mainMenu">Main Menu</button>
            </div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/i18n.js"></script>
    <script src="js/techniques.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/backgrounds.js"></script>
    <script src="js/animations/boxAnimation.js"></script>
    <script src="js/animations/arcAnimation.js"></script>
    <script src="js/animations/bellyAnimation.js"></script>
    <script src="js/animations/waveAnimation.js"></script>
    <script src="js/animations/powerAnimation.js"></script>
    <script src="js/animations/gaugeAnimation.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
